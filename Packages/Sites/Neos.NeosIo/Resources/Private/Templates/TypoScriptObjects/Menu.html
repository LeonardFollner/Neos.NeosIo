{namespace neos=TYPO3\Neos\ViewHelpers}
{namespace ts=TYPO3\TypoScript\ViewHelpers}

<nav role="navigation">
	<ul {attributes -> f:format.raw()} id="siteNav">
		<f:for each="{items}" as="item">
			<li class="{f:if(condition: '{item.state} != \'normal\'', then: ' active')}">
				<f:if condition="{item.subItems}">
					<f:then>
						<neos:link.node node="{item.node}" additionalAttributes="{role: 'button', aria-haspopup: 'true', aria-expanded: 'false'}">
							{item.node.label}
						</neos:link.node>
						<ul class="nav nav--stacked siteHeader__dropDownNav">
							<f:for each="{item.subItems}" as="subItem">
								<li class="{f:if(condition: '{subItem.state} != \'normal\'', then: ' active')}">
									<neos:link.node node="{subItem.node}">{subItem.node.label}</neos:link.node>
								</li>
							</f:for>
						</ul>
					</f:then>
					<f:else>
						<neos:link.node node="{item.node}">{item.node.label}</neos:link.node>
					</f:else>
				</f:if>
			</li>
		</f:for>
	</ul>
</nav>
