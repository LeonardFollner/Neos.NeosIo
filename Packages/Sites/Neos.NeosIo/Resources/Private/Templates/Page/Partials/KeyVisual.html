{namespace media=TYPO3\Media\ViewHelpers}

<section class="keyVisual {f:if(condition: size, then: 'keyVisual--{size}')} ">
	<div class="
	keyVisual__contents
	u-alignCenter
	{f:if(condition: isKeyVisualContentsInverted, then: 'u-invertText')}
	"
	data-component="ProgressiveImage"
	data-isInline="true"
	<f:if condition="{keyVisualImage}">
		<f:then>
			data-src="{media:uri.image(asset: keyVisualImage, maximumWidth: 1500, maximumHeight: 1500)}"
			data-srcSet="{keyVisualImageSrcSet}"
			style="background-image: url('{media:uri.image(asset: keyVisualImage, maximumWidth: 5, maximumHeight: 5)}')"
		</f:then>
		<f:else>
			<f:if condition="{size}">
				<f:then>
					data-src="{f:uri.resource(path: 'Images/DefaultKeyvisual.jpg', package: 'Neos.NeosIo')}"
					style="background-image: url('{f:uri.resource(path: 'Images/DefaultKeyvisual.jpg', package: 'Neos.NeosIo')}')"
				</f:then>
				<f:else>
					data-src="{f:uri.resource(path: 'Images/DefaultSmallKeyvisual.jpg', package: 'Neos.NeosIo')}"
					style="background-image: url('{f:uri.resource(path: 'Images/DefaultSmallKeyvisual.jpg', package: 'Neos.NeosIo')}')"
				</f:else>
			</f:if>
		</f:else>
	</f:if>
	>
		{contents -> f:format.raw()}
	</div>
	<a
		data-component="ScrollTo"
		href="#mainContent"
		data-targetSelector="#mainContent"
		class="scrollHint"></a>
</section>


<f:section name="imageSrcSet">
	<f:if condition="{keyVisualImage}">
		<media:uri.image asset="{keyVisualImage}" maximumWidth="1920" maximumHeight="1600" /> 1920w,
		<media:uri.image asset="{keyVisualImage}" maximumWidth="1280" maximumHeight="1000" /> 1280w,
		<media:uri.image asset="{keyVisualImage}" maximumWidth="658" maximumHeight="658" allowCropping="1" /> 658w,
		<media:uri.image asset="{keyVisualImage}" maximumWidth="400" maximumHeight="400" allowCropping="1" /> 280w
	</f:if>
</f:section>
