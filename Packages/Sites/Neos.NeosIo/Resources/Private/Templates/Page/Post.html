{namespace neos=TYPO3\Neos\ViewHelpers}
{namespace media=TYPO3\Media\ViewHelpers}
{namespace ts=TYPO3\TypoScript\ViewHelpers}

<!DOCTYPE html>
<html>
<body>
<f:section name="body">
	<f:render partial="SiteHeader.html" arguments="{_all}" />

	<f:if condition="{keyVisualImage}">
		<f:render partial="KeyVisual.html" arguments="{
			isKeyVisualContentsInverted: true,
			keyVisualImage: keyVisualImage
		}" />
	</f:if>
	{content.main -> f:format.raw()}

	<f:render partial="SiteFooter.html" arguments="{_all}" />
</f:section>
<f:section name="post">
	<div class="stage stage--bright" id="mainContent">
		<div class="stage__contents{f:if(condition: image, else: ' stage__contents--extraPadding')}">
			<div class="g">
				<main class="u-wm7/12 u-pr1/1 u-mr1/1 u-floatLeft" role="main">
					<section class="post">
						<neos:contentElement.wrap node="{node}">
							<time datetime="{datePublished -> f:format.date(format: 'c')}" itemprop="datePublished">{datePublished -> media:format.relativeDate()}</time>
							<f:if condition="{author}">
								â€“ <span itemprop="author" itemscope="" itemtype="https://schema.org/Person"><span itemprop="name">{author}</span></span>
							</f:if>
							<f:if condition="{image}">
								<meta itemprop="image" content="{media:uri.image(asset: image, maximumWidth: 720, maximumHeight: 500, allowCropping: 1, allowUpScaling: 1)}" />
							</f:if>
							<header>
								<neos:contentElement.editable property="title" tag="h1" additionalAttributes="{itemprop: 'headline'}" />
								<f:if condition="{neos:rendering.live()}">
									<f:then>
										<f:if condition="{summary}"><h2 itemprop="description" class="h4">{summary}</h2></f:if>
									</f:then>
									<f:else>
										<neos:contentElement.editable property="summary" tag="h2" class="h3" additionalAttributes="{itemprop: 'description'}" />
									</f:else>
								</f:if>
							</header>
						</neos:contentElement.wrap>
						<div itemprop="articleBody">
							{content -> f:format.raw()}
						</div>
					</section>
				</main>
				<aside class="u-wm4/12 u-pl1/1 u-ml1/1 u-floatLeft sideBar">
					<nav>
						<f:if condition="{relatedDocuments}">
							<div class="h5">Related</div>
							<ul>
								<f:for each="{relatedDocuments}" as="relatedDocument">
									<li><neos:link.node node="{relatedDocument}" /></li>
								</f:for>
							</ul>
						</f:if>
						<neos:link.node node="{node.parent}" class="h5">Latest posts</neos:link.node>
						<ul>
							<f:for each="{latest}" as="post">
								<f:if condition="{post} != {node}">
									<li><neos:link.node node="{post}" /><br />{post.properties.datePublished -> media:format.relativeDate()}</li>
								</f:if>
							</f:for>
						</ul>
					</nav>
				</aside>
			</div>
		</div>
	</div>
</f:section>
</body>
</html>
